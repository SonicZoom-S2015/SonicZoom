<!DOCTYPE html>
<html>
<head>
    <title>Training</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <style>
        body {
            font-family: Monospace;
            background-color: #f0f0f0;
            margin: 0px;
            overflow: hidden;
        }
    </style>
</head>
<body  onload="setTimeout(function(){window.location = './index.html';}, 70500)">
<div id="container"></div>
<script src="JS/three.min.js"></script>
<script src='JS/THREEx.WindowResize.js'></script>
<script defer="defer">
    // revolutions per second
    var angularSpeed = 0.2;
    var lastTime = 0;
    var firstTime = (new Date()).getTime();
    sound = new Audio("Audio/training.mp3");
    sound.play();

    // this function is executed on each animation frame
    function animate(){
        requestAnimationFrame( animate );
        render();
    }

    function render(){
        // update
        var time = (new Date()).getTime();
        var timeDiff = time - lastTime;
        var angleChange = angularSpeed * timeDiff * 2 * Math.PI / 1000;
        cube.rotation.y += angleChange;
        cube.rotation.x += angleChange;
        cube2.rotation.y += angleChange;
        cube2.rotation.x += angleChange;
        lastTime = time;
        var currTime = time-firstTime;
        if(currTime>18500 && currTime<21000){
            cube.position.x = -window.innerWidth/10;
        }else if(currTime>21000 && currTime<23000){
            cube.position.x = 0;
        }else if(currTime>23000 && currTime<24500){
            cube.position.x = window.innerWidth/10;
        }else{
            cube.position.x = window.innerWidth;
        }
        if(currTime>32500 && currTime<35000){
            cube2.position.x = -window.innerWidth/10;
        }else if(currTime>35000 && currTime<37000){
            cube2.position.x = 0;
        }else if(currTime>37000 && currTime<38500){
            cube2.position.x = window.innerWidth/10;
        }else{
            cube2.position.x = window.innerWidth;
        }
        // render
        renderer.autoClear = false;
        renderer.clear();
        renderer.render(backgroundScene , backgroundCamera );
        renderer.render(scene, camera);
    }

    // renderer
    var renderer = new THREE.WebGLRenderer();
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    // camera
    var camera = new THREE.PerspectiveCamera(84, window.innerWidth / window.innerHeight, .01, 1000);
    camera.position.z = 500;

    // scene
    var scene = new THREE.Scene();

    // material
    var material1 = new THREE.MeshLambertMaterial({
        map: THREE.ImageUtils.loadTexture('Textures/cointex.bmp')
    });

    var material2 = new THREE.MeshLambertMaterial({
        map: THREE.ImageUtils.loadTexture('Textures/minetex.bmp')
    });

    // cube
    var cube = new THREE.Mesh(new THREE.CubeGeometry(window.innerWidth/20, window.innerWidth/20, window.innerWidth/20), material1);
    cube.overdraw = true;
    cube.rotation.x = Math.PI * 0.1;
    cube.position.x = -window.innerWidth;
    cube.position.y = -60;
    cube.position.z = 300;
    scene.add(cube);

    // cube
    var cube2 = new THREE.Mesh(new THREE.CubeGeometry(window.innerWidth/20, window.innerWidth/20, window.innerWidth/20), material2);
    cube2.overdraw = true;
    cube2.rotation.x = Math.PI * 0.1;
    cube2.position.x = -window.innerWidth;
    cube2.position.y = -60;
    cube2.position.z = 300;
    scene.add(cube2);

    // add subtle ambient lighting
    var ambientLight = new THREE.AmbientLight(0xbbbbbb);
    scene.add(ambientLight);

    // directional lighting
    var directionalLight = new THREE.DirectionalLight(0xffffff);
    directionalLight.position.set(1, 1, 1).normalize();
    scene.add(directionalLight);

    // Load the background texture
    var texture = THREE.ImageUtils.loadTexture( 'Textures/bkgd.jpg' ); //bkgd.jpg
    var backgroundMesh = new THREE.Mesh(
            new THREE.PlaneGeometry(2, 2, 0),
            new THREE.MeshBasicMaterial({
                map: texture
            }));

    backgroundMesh .material.depthTest = false;
    backgroundMesh .material.depthWrite = false;

    // Create your background scene
    var backgroundScene = new THREE.Scene();
    var backgroundCamera = new THREE.Camera();
    backgroundScene .add(backgroundCamera );
    backgroundScene .add(backgroundMesh );

    // start animation
    THREEx.WindowResize(renderer, camera);

    document.onkeydown = checkKey;

    animate();
    function checkKey(e) {
        // ESC - pause
        if (e.keyCode == '27') {
            window.open("./index.html", "_self");
        }
    }


</script><canvas width="1600" height="789" style="width: 1600px; height: 789px;"></canvas>

 </body></html>